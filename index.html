<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SeeklyMusic</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
<header>
    <h1>SeeklyMusic</h1>
    <div id="userPanel" style="display:none;">
        <img id="profilePicHeader" src="default.png" class="profile-img" onclick="toggleProfileEdit()">
        <span id="displayNameHeader"></span>
        <button onclick="logout()"><i class="fas fa-right-from-bracket"></i> Wyloguj</button>
    </div>
    <button id="loginBtn" onclick="showLogin()"><i class="fas fa-user"></i> Zaloguj / Zarejestruj</button>
</header>

<div id="loginForm" class="card">
    <h2>Logowanie / Rejestracja</h2>
    <input type="email" id="email" placeholder="Email"><br>
    <input type="password" id="password" placeholder="Hasło"><br>
    <input type="text" id="displayName" placeholder="Nazwa wyświetlana"><br>
    <select id="role">
        <option value="user">Nie-twórca</option>
        <option value="creator">Twórca</option>
    </select><br>
    <button onclick="register()"><i class="fas fa-user-plus"></i> Zarejestruj</button>
    <button onclick="login()"><i class="fas fa-right-to-bracket"></i> Zaloguj</button>
    <p id="msg"></p>
</div>

<div id="profileEdit" class="card" style="display:none;">
    <h2>Edytuj profil</h2>
    <input type="text" id="displayNameInput" placeholder="Nazwa wyświetlana"><br>
    <input type="file" id="profileFile" accept="image/*"><br>
    <button onclick="updateProfile()"><i class="fas fa-save"></i> Zapisz zmiany</button>
</div>

<div id="publishForm" class="card" style="display:none;">
    <h2>Opublikuj utwór</h2>
    <input type="text" id="trackTitle" placeholder="Tytuł utworu"><br>
    <input type="text" id="trackAuthor" placeholder="Autor"><br>
    <input type="file" id="trackFile" accept=".mp3,.mp4,.wav"><br>
    <input type="file" id="trackCover" accept="image/*"><br>
    <button onclick="publishTrack()"><i class="fas fa-upload"></i> Opublikuj</button>
</div>

<div class="card">
    <h2>Wyszukaj utwory</h2>
    <input type="text" id="search" placeholder="Szukaj..." onkeyup="renderTracks()">
</div>

<div id="tracks" class="track-list"></div>

<script src="script.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    checkLogin();
    renderTracks();
});
</script>
</body>
</html>
